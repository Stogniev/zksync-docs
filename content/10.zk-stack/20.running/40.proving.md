---
title: Proving
description:
---

## Enabling Boojum prover

With the default configuration, your ZK chain is not running a prover, and has a DummyExecutor contract,
which mainly “accepts” that a batch is executed without proof. This enables you to test it with much lower hardware requirements.

When enabling the Boojum prover, there are two options for running it: in GPU, or in CPU.

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
**Running a prover is not required** for deploying a testnet. The requirements below are only necessary if you want to enable the prover.
::

### Prover dependencies

Ensure you have installed:

- [gcloud](https://cloud.google.com/sdk/docs/install)
- [wget](https://www.gnu.org/software/wget/)
- [cmake](https://apt.kitware.com/)
- [nvcc (CUDA toolkit)](https://developer.nvidia.com/cuda-downloads)

Refer to the [prover docs](https://matter-labs.github.io/zksync-era/prover/latest/) for more
information.

### Running the prover

To initialize the prover, first use the init command:

```bash
zkstack prover init
```

It will guide you through the necessary configuration.

Then to run the prover:

```bash
zkstack prover run
```

Setting `NoProofs` at chain initialization does not prevent you from starting publishing proofs.
This setting allows effectively allows both real and dummy proofs (any real published proofs will be validated).
To avoid excessive cost of your testnet you may enable & disable proving on a `NoProofs` chain as needed.

## Hardware Requirements

### Requirements for GPU prover

The docker compose file assumes you will be running all components in the same machine. The current minimum requirements for a low TPS scenario are:

- 6 GB VRAM NVIDIA GPU
- 16 Core CPU
- 64 GB of RAM
- 300 GB of Disk Space (SSD preferred)

### Requirements for CPU prover

The docker compose file assumes you will be running all components in the same machine.
The current minimum requirements for a low TPS scenario are:

- 32 Core CPU
- 128 GB of RAM
- 700 GB of Disk Space (SSD preferred)

### Scaling your prover

Initially, you can start prover infrastructure on just one machine to familiarize yourself with the components.
Although you might have issues running all simultaneously due to VRAM usage.

To scale your prover, provision multiple witness generators, circuit provers and proof compressors to handle higher throughput.
Currently about 2 Witness Generators, 4 Circuit Provers and 1 Proof Compressor should be enough to run 1TPS.
However, this is a rough estimate that depends on the machines you use and is getting lowered by ongoing optimization efforts.
Make sure all are connected to the same database, same object storage, and you do not duplicate the singleton gateway and monitor.

::drop-panel

  ::panel{label="Prover Components"}

  **Note:** Recommended hardware is “known good” not optimized. vRAM amount are close to minimal for good performance.

  | Component | Scaling | Responsibility | Dependencies | State Recovery | Load Pattern | Recommended hardware |
  | --- | --- | --- | --- | --- | --- | --- |
  | Prover Gateway | Singleton | Receives proof-related info from Server and stores it on the Prover side | Prover PSQL, GCS | Stateless | CPU load; Network | 0.5vCPU, 2GB RAM |
  | Witness Generators | Autoscale  | Computes witnesses for blocks. Very CPU- and memory-heavy. | Prover PSQL; GCS | Stateless | CPU load; High RAM; Network | 8vCPU, 64GB RAM |
  | Circuit Prover | Autoscale | Generates vectors (CPU load) & computes proofs based on generated vectors (GPU load) | Prover PSQL; GCS; GPU | Stateless | GPU load; CPU load; High RAM; Network | good perf. 16GiB vRAM , best perf. 20GiB vRAM, 32vCPU, 128GB RAM |
  | Proof Compressor | Autoscale | Compresses STARK proof from FRI Prover GPU to SNARK proof | Prover PSQL; GCS; GPU | Stateless | GPU load; Network; ~1/8 circuit prover load | 24GiB VRAM, tested: 16vCPU, 64GB RAM (should work with less) |
  | Prover Job Monitor | Singleton | Scheduling jobs when dependent jobs are completed or when jobs are stuck and ,metrics  | Prover PSQL | Stateless | CPU load; Network | 0.5vCPU, 2GB RAM |

  ::
::

#### Prover Monitoring

It's recommended to monitor proof-related metrics and logs in production to validate that multiple provers work concurrently.
Note that the proving process is cannot be fully parallelized and has internal dependencies.
`Prover job monitor` is responsible for scheduling available jobs for execution.
Multiple batches are proven in parallel when resources are available.

The best way to measure your system performance is to look at circuit prove metrics in Grafana.
Proving batches with fewer transactions requires less circuit proofs to be performed,
while you would expect each circuit proof to take a similar amount of time.
You may also investigate the state of jobs in the prover database.

It is useful to understand at this point different batch sealing criteria. The most common are:

- Timeout (server configurable, default is 8 hours) is triggered when blockchain has low usage.
- Geometry limits are triggered when proving system limits are reached (due to high amount of computation in transactions).
- Pubdata limits are triggered when state change size limits are reached (due to high amount of such from transactions).
